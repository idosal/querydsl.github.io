<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.6. Mongodb &#53244;&#47532;</title><link rel="stylesheet" href="css/stylesheet.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="index.html" title="Querydsl - &#47112;&#54140;&#47088;&#49828; &#47928;&#49436;"><link rel="up" href="ch02.html" title="2&#51109;. &#53916;&#53664;&#47532;&#50620;"><link rel="prev" href="ch02s05.html" title="2.5. Hibernate Search &#53244;&#47532;"><link rel="next" href="ch02s07.html" title="2.7. &#53084;&#47113;&#49496; &#53244;&#47532;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.6. Mongodb &#53244;&#47532;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s05.html">&#51060;&#51204;</a>&nbsp;</td><th width="60%" align="center">2&#51109;. &#53916;&#53664;&#47532;&#50620;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s07.html">&#45796;&#51020;</a></td></tr></table><hr></div><div class="sect1" lang="ko-KR"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mongodb_integration"></a>2.6. Mongodb &#53244;&#47532;</h2></div></div></div><p>Mongodb &#47784;&#46280;&#51032; &#51312;&#54924; &#44592;&#45733;&#51012; &#49444;&#47749;&#54620;&#45796;.</p><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1471"></a>2.6.1. &#47700;&#51060;&#48656; &#53685;&#54633;</h3></div></div></div><p>
      &#47700;&#51060;&#48656; &#54532;&#47196;&#51229;&#53944;&#50640; &#45796;&#51020; &#51032;&#51316;&#51012; &#52628;&#44032;&#54620;&#45796;.
    </p><pre class="programlisting">
<span class="hl-tag">&lt;dependency&gt;</span>
  <span class="hl-tag">&lt;groupId&gt;</span>com.mysema.querydsl<span class="hl-tag">&lt;/groupId&gt;</span>
  <span class="hl-tag">&lt;artifactId&gt;</span>querydsl-apt<span class="hl-tag">&lt;/artifactId&gt;</span>
  <span class="hl-tag">&lt;version&gt;</span>${querydsl.version}<span class="hl-tag">&lt;/version&gt;</span>
  <span class="hl-tag">&lt;scope&gt;</span>provided<span class="hl-tag">&lt;/scope&gt;</span>
<span class="hl-tag">&lt;/dependency&gt;</span>    
        
<span class="hl-tag">&lt;dependency&gt;</span>
  <span class="hl-tag">&lt;groupId&gt;</span>com.mysema.querydsl<span class="hl-tag">&lt;/groupId&gt;</span>
  <span class="hl-tag">&lt;artifactId&gt;</span>querydsl-mongodb<span class="hl-tag">&lt;/artifactId&gt;</span>
  <span class="hl-tag">&lt;version&gt;</span>${querydsl.version}<span class="hl-tag">&lt;/version&gt;</span>
<span class="hl-tag">&lt;/dependency&gt;</span>

<span class="hl-tag">&lt;dependency&gt;</span>
  <span class="hl-tag">&lt;groupId&gt;</span>org.slf4j<span class="hl-tag">&lt;/groupId&gt;</span>
  <span class="hl-tag">&lt;artifactId&gt;</span>slf4j-log4j12<span class="hl-tag">&lt;/artifactId&gt;</span>
  <span class="hl-tag">&lt;version&gt;</span>1.6.1<span class="hl-tag">&lt;/version&gt;</span>
<span class="hl-tag">&lt;/dependency&gt;</span>    
</pre><p>
      Querydsl&#51012; &#51060;&#50857;&#54644;&#49436; &#53244;&#47532; &#53440;&#51077;&#51012; &#49373;&#49457;&#54616;&#44592; &#50948;&#54644; &#47700;&#51060;&#48656; APT &#54540;&#47084;&#44536;&#51064;&#51012; &#49444;&#51221;&#54620;&#45796;.
    </p><pre class="programlisting">
<span class="hl-tag">&lt;project&gt;</span>
  <span class="hl-tag">&lt;build&gt;</span>
    <span class="hl-tag">&lt;plugins&gt;</span>
      ...
      <span class="hl-tag">&lt;plugin&gt;</span>
        <span class="hl-tag">&lt;groupId&gt;</span>com.mysema.maven<span class="hl-tag">&lt;/groupId&gt;</span>
        <span class="hl-tag">&lt;artifactId&gt;</span>apt-maven-plugin<span class="hl-tag">&lt;/artifactId&gt;</span>
        <span class="hl-tag">&lt;version&gt;</span>1.0.9<span class="hl-tag">&lt;/version&gt;</span>
        <span class="hl-tag">&lt;executions&gt;</span>
          <span class="hl-tag">&lt;execution&gt;</span>
            <span class="hl-tag">&lt;goals&gt;</span>
              <span class="hl-tag">&lt;goal&gt;</span>process<span class="hl-tag">&lt;/goal&gt;</span>
            <span class="hl-tag">&lt;/goals&gt;</span>
            <span class="hl-tag">&lt;configuration&gt;</span>
              <span class="hl-tag">&lt;outputDirectory&gt;</span>target/generated-sources/java<span class="hl-tag">&lt;/outputDirectory&gt;</span>
              <span class="hl-tag">&lt;processor&gt;</span>com.mysema.query.apt.morphia.MorphiaAnnotationProcessor<span class="hl-tag">&lt;/processor&gt;</span>
            <span class="hl-tag">&lt;/configuration&gt;</span>
          <span class="hl-tag">&lt;/execution&gt;</span>
        <span class="hl-tag">&lt;/executions&gt;</span>
      <span class="hl-tag">&lt;/plugin&gt;</span>
    ...
    <span class="hl-tag">&lt;/plugins&gt;</span>
  <span class="hl-tag">&lt;/build&gt;</span>
<span class="hl-tag">&lt;/project&gt;</span>
</pre><p>
      MorphiaAnnotationProcessor&#45716; <code class="code">com.google.code.morphia.annotations.Entity</code>
      &#50528;&#45432;&#53580;&#51060;&#49496;&#51060; &#51201;&#50857;&#46108; &#46020;&#47700;&#51064; &#53440;&#51077;&#51012; &#50948;&#54620; Querydsl &#53244;&#47532; &#53440;&#51077;&#51012; &#49373;&#49457;&#54620;&#45796;.
    </p><p>
      mvn clean install &#51012; &#49892;&#54665;&#54616;&#47732; target/generated-sources/java &#54260;&#45908;&#50640; &#53244;&#46972; &#53440;&#51077; &#53076;&#46300;&#44032; &#49373;&#49457;&#46108;&#45796;.
    </p><p>
      &#51060;&#53364;&#47549;&#49828;&#47484; &#49324;&#50857;&#51473;&#51060;&#47732;, mvn eclipse:eclipse &#51012; &#49892;&#54665;&#54644;&#49436;
      target/generated-sources/java&#51012; &#51060;&#53364;&#47549;&#49828; &#54532;&#47196;&#51229;&#53944;&#51032; &#49548;&#49828; &#54260;&#45908;&#50640; &#54252;&#54632;&#49884;&#53416;&#45796;.
    </p><p>
      &#51060;&#51228; &#53244;&#47532; &#46020;&#47700;&#51064; &#47784;&#45944;&#51012; &#51060;&#50857;&#54644;&#49436; Mongodb&#47484; &#51312;&#54924;&#54624; &#49688; &#51080;&#45796;.
    </p></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1493"></a>2.6.2. &#53244;&#47532;</h3></div></div></div><p>Querydsl Mongodb&#47484; &#51060;&#50857;&#54616;&#47732; &#45796;&#51020;&#44284; &#44057;&#51060; &#44036;&#45800;&#54616;&#44172; &#53244;&#47532;&#54624; &#49688; &#51080;&#45796;.
    </p><pre class="programlisting">
Morphia morphia;
Datastore datastore;
<span class="hl-comment">// ...	</span>
QUser user = <span class="hl-keyword">new</span> QUser(<span class="hl-string">"user"</span>);
MorphiaQuery&lt;User&gt; query = <span class="hl-keyword">new</span> MorphiaQuery&lt;User&gt;(morphia, datastore, user);
List&lt;User&gt; list = query
	.where(user.firstName.eq(<span class="hl-string">"Bob"</span>))
	.list();
</pre></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1500"></a>2.6.3. &#51068;&#48152; &#50857;&#48277;</h3></div></div></div><p>MongodbQuery &#53364;&#47000;&#49828;&#51032; cascading &#47700;&#49436;&#46300;&#45716; &#45796;&#51020;&#44284; &#44057;&#45796;.</p><p>
      <span class="emphasis"><em>where:</em></span>
      &#53244;&#47532; &#54596;&#53552;&#47484; &#52628;&#44032;&#54620;&#45796;. &#44032;&#48320;&#51064;&#51088;&#45208; and/or &#47700;&#49436;&#46300;&#47484; &#51060;&#50857;&#54644;&#49436; &#54596;&#53552;&#47484; &#52628;&#44032;&#54620;&#45796;.
      PStrings&#50640; &#49688;&#54665;&#46104;&#45716; &#50724;&#54140;&#47112;&#51060;&#49496;&#51012; &#51648;&#50896;&#54620;&#45796;.
      (<span class="emphasis"><em>matches</em></span>, <span class="emphasis"><em>indexOf</em></span>, <span class="emphasis"><em>charAt</em></span>&#51008; &#51228;&#50808;).
      &#54788;&#51116; <span class="emphasis"><em>in</em></span>&#51008; &#51648;&#50896;&#46104;&#51648; &#50506;&#51004;&#47728;, &#54693;&#54980; &#51648;&#50896;&#54624; &#50696;&#51221;&#51060;&#45796;.
    </p><p>
      <span class="emphasis"><em>orderBy:</em></span>
      &#51221;&#47148; &#54364;&#54788;&#49885;&#51012; &#51060;&#50857;&#54644;&#49436; &#51221;&#47148; &#49692;&#49436;&#47484; &#51648;&#51221;&#54620;&#45796;. &#49707;&#51088;&#45208; &#47928;&#51088;&#50676;&#50640; &#45824;&#54644;&#49436;&#45716;
      asc()&#45208; desc()&#47484; &#49324;&#50857;&#54616;&#44256;, OrderSpecifier&#50640; &#51217;&#44540;&#54616;&#44592; &#50948;&#54644; &#45796;&#47480; &#48708;&#44368; &#54364;&#54788;&#49885;&#51012; &#49324;&#50857;&#54620;&#45796;.
    </p><p>
      <span class="emphasis"><em>limit, offset, restrict:</em></span>
      &#44208;&#44284;&#51032; &#54168;&#51060;&#51669;&#51012; &#49444;&#51221;&#54620;&#45796;. limit&#51008; &#52572;&#45824; &#44208;&#44284; &#44060;&#49688;, offset&#51008; &#44208;&#44284;&#51032; &#49884;&#51089; &#54665;,
      restrict&#45716; limit&#44284; offset&#51012; &#54632;&#44760; &#51221;&#51032;&#54620;&#45796;.
    </p></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1532"></a>2.6.4. &#51221;&#47148;</h3></div></div></div><p>&#51221;&#47148; &#44396;&#47928;&#51008; &#45796;&#51020;&#44284; &#44057;&#45796;.</p><pre class="programlisting"> 
query
    .where(doc.title.like(<span class="hl-string">"*"</span>))
    .orderBy(doc.title.asc(), doc.year.desc())
    .list();
</pre><p>title&#44284; year&#51032; &#50724;&#47492;&#52264;&#49692;&#51004;&#47196; &#44208;&#44284;&#47484; &#51221;&#47148;&#54620;&#45796;.</p></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1541"></a>2.6.5. &#44208;&#44284; &#44060;&#49688; &#51228;&#54620;</h3></div></div></div><p>&#45796;&#51020;&#44284; &#44057;&#51060; &#44208;&#44284; &#44060;&#49688;&#47484; &#51228;&#54620;&#54620;&#45796;.</p><pre class="programlisting"> 
query
    .where(doc.title.like(<span class="hl-string">"*"</span>))
    .limit(<span class="hl-value">10</span>)
    .list();
</pre></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1548"></a>2.6.6. &#50724;&#54532;&#49483;</h3></div></div></div><p>&#45796;&#51020;&#44284; &#44057;&#51060; &#50724;&#54532;&#49483;&#51012; &#51648;&#51221;&#54620;&#45796;.</p><pre class="programlisting"> 
query
    .where(doc.title.like(<span class="hl-string">"*"</span>))
    .offset(<span class="hl-value">3</span>)
    .list();
</pre></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1555"></a>2.6.7. &#44277;&#44036;(Geospatial) &#53244;&#47532;</h3></div></div></div><p>near(Douyble[]) &#47700;&#49436;&#46300;&#47484; &#51060;&#50857;&#54644;&#49436; &#44277;&#44036; &#44160;&#49353;&#51012; &#54624; &#49688; &#51080;&#45796;.</p><pre class="programlisting"> 
query
    .where(geoEntity.location.near(<span class="hl-value">50.0</span>, <span class="hl-value">50.0</span>))
    .list();
</pre></div><div class="sect2" lang="ko-KR"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1562"></a>2.6.8. &#44288;&#47144; &#54596;&#46300;&#47564; &#49440;&#53469;&#54616;&#44592;</h3></div></div></div><p>&#44288;&#47144; &#54596;&#46300;&#47564; &#49440;&#53469;&#54616;&#44256; &#49910;&#45796;&#47732;, &#49440;&#53469; &#45824;&#49345; &#47785;&#47197;&#51012; &#44054;&#45716; list, iterate, uniqueResult,
    singleResult &#47700;&#49436;&#46300;&#47484; &#49324;&#50857;&#54616;&#47732; &#46108;&#45796;.
    </p><pre class="programlisting"> 
query
    .where(doc.title.like(<span class="hl-string">"*"</span>))
    .list(doc.title, doc.path);
</pre><p>&#51060; &#53244;&#47532;&#45716; &#47928;&#49436;&#51032; title&#44284; path &#54596;&#46300;&#47564; &#51312;&#54924;&#54620;&#45796;.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s05.html">&#51060;&#51204;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html">&#50948;&#47196;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s07.html">&#45796;&#51020;</a></td></tr><tr><td width="40%" align="left" valign="top">2.5. Hibernate Search &#53244;&#47532;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#52376;&#51020;&#51004;&#47196;</a></td><td width="40%" align="right" valign="top">&nbsp;2.7. &#53084;&#47113;&#49496; &#53244;&#47532;</td></tr></table></div></body></html>